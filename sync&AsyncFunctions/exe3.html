<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Asynchronous Function</h1>
    <p>start, after 3 and 5 and 7 seconds generate a random number,end</p>
    <button onclick="go()">go</button>
    <script>
        //V1 - old way: 
        // function go(){
        //     console.log('start');

            // setTimeout(()=>{
            //     const num = Math.floor(Math.random()*100);
            //     console.log(num)
            // },3000);
            // setTimeout(()=>{
            //     const num = Math.floor(Math.random()*100);
            //     console.log(num)
            // },5000);
            // setTimeout(()=>{
            //     const num = Math.floor(Math.random()*100);
            //     console.log(num)
            // },7000);

        //     console.log('end');
        // }


        //V2:
        // function print(callback){
        //     console.log('start');
        //     callback();
        //     console.log('end');
        // }

        // function displayNumbers(){
        //     setTimeout(()=>{
        //         const num = Math.floor(Math.random()*100);
        //         console.log(num)
        //     },3000);
        //     setTimeout(()=>{
        //         const num = Math.floor(Math.random()*100);
        //         console.log(num)
        //     },5000);
        //     setTimeout(()=>{
        //         const num = Math.floor(Math.random()*100);
        //         console.log(num)
        //     },7000);
        // }
        
        // function go(){
        //     print(displayNumbers);
        // }


        //V3:
        async function go() {
            try {
                console.log('start');
                console.log('end');
                const n1 = await random(3000);
                const n2 = await random(5000);
                const n3 = await random(7000);
            }
            catch (err) {
                console.log("error:", err)
            }
        }

        function random(ms) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const num = Math.floor(Math.random() * 100);
                    if(num<2){
                        reject(new Error("craaash!"));
                    } else{
                        console.log(num);
                        resolve(num);     
                    }
                }, ms);

            });
        }
    </script>
</body>

</html>